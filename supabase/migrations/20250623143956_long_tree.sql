/*
  # Создание таблицы articles для хранения статей

  1. New Tables
    - `articles` - Таблица для хранения статей
      - `id` (uuid, primary key)
      - `title` (text) - Заголовок статьи
      - `slug` (text) - URL-идентификатор статьи
      - `content` (text) - Полный текст статьи
      - `short_description` (text) - Краткое описание статьи
      - `image_url` (text) - URL изображения статьи
      - `published` (boolean) - Флаг публикации статьи
      - `published_at` (timestamptz) - Дата публикации
      - `author_id` (uuid) - Ссылка на автора
      - `created_at` (timestamptz)
      - `updated_at` (timestamptz)
  
  2. Security
    - Enable RLS on `articles` table
    - Add policy for authenticated users with admin role to manage all articles
    - Add policy for public users to read published articles
*/

-- Создание таблицы articles
CREATE TABLE IF NOT EXISTS articles (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  title text NOT NULL,
  slug text NOT NULL UNIQUE,
  content text NOT NULL,
  short_description text,
  image_url text,
  published boolean DEFAULT false,
  published_at timestamptz DEFAULT now(),
  author_id uuid REFERENCES auth.users(id) ON DELETE SET NULL,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);

-- Индексы для улучшения производительности
CREATE INDEX IF NOT EXISTS idx_articles_slug ON articles (slug);
CREATE INDEX IF NOT EXISTS idx_articles_published ON articles (published);
CREATE INDEX IF NOT EXISTS idx_articles_published_at ON articles (published_at);
CREATE INDEX IF NOT EXISTS idx_articles_author_id ON articles (author_id);

-- Включение RLS для таблицы
ALTER TABLE articles ENABLE ROW LEVEL SECURITY;

-- Политики безопасности

-- Администраторы могут выполнять любые операции
CREATE POLICY "Admins can manage all articles"
ON articles
FOR ALL
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM users
    WHERE users.id = auth.uid() AND users.role = 'admin'
  )
);

-- Все пользователи (включая неавторизованных) могут видеть опубликованные статьи
CREATE POLICY "Public can view published articles"
ON articles
FOR SELECT
TO public
USING (published = true);

-- Триггер для автоматического обновления поля updated_at
CREATE TRIGGER update_articles_updated_at
BEFORE UPDATE ON articles
FOR EACH ROW
EXECUTE FUNCTION update_updated_at_column();

-- Добавление начальных данных
INSERT INTO articles (title, slug, content, short_description, image_url, published, published_at)
VALUES 
  (
    'Инновации в синтезе пептидов', 
    'innovacii-v-sinteze-peptidov',
    '# Инновации в синтезе пептидов

Пептиды являются важнейшими соединениями в биологических системах, играющими ключевую роль в множестве физиологических процессов. Их синтез представляет собой один из важнейших направлений современной химии и биотехнологии.

## Новые методы химического синтеза

За последние годы были разработаны новые методы и технологии химического синтеза пептидов, которые значительно повышают эффективность и снижают затраты. Среди них можно выделить:

1. **Оптимизированные методы твердофазного синтеза** - улучшенные протоколы, повышающие выход продукта и снижающие расход реагентов.
2. **Новые защитные группы** - более эффективные и селективные защитные группы для аминокислот, упрощающие процесс синтеза.
3. **Усовершенствованные конденсирующие реагенты** - новые реагенты, повышающие эффективность образования пептидной связи и снижающие рацемизацию.
4. **Автоматизация синтеза** - развитие полностью автоматизированных систем, позволяющих синтезировать пептиды с минимальным участием человека.

## Применение новых технологий

Современные технологии, такие как микроволновый синтез и проточная химия, находят все большее применение в синтезе пептидов. Эти подходы позволяют значительно сократить время реакции и повысить чистоту конечных продуктов.

## Экологические аспекты

Важным направлением является разработка экологически чистых методов синтеза пептидов, включающих использование более безопасных растворителей, снижение количества отходов и повышение энергоэффективности процессов.

## Заключение

Инновации в синтезе пептидов продолжают развиваться, открывая новые возможности для получения сложных пептидных соединений с высокой чистотой и выходом. Эти достижения имеют огромное значение для развития медицины, биотехнологии и других областей науки и промышленности.',
    'Новые методы и технологии химического синтеза пептидов, повышающие эффективность и снижающие затраты.',
    'https://images.pexels.com/photos/4033148/pexels-photo-4033148.jpeg?auto=compress&cs=tinysrgb&w=600',
    true,
    '2025-04-15 10:00:00+00'
  ),
  (
    'Пептиды в современной медицине', 
    'peptidy-v-sovremennoy-medicine',
    '# Пептиды в современной медицине

Пептиды представляют собой короткие цепочки аминокислот, соединенных пептидными связями. Эти соединения играют важнейшую роль в регуляции различных биологических процессов в организме и обладают огромным потенциалом для применения в медицине.

## Терапевтическое применение пептидов

В настоящее время пептиды широко используются в качестве лекарственных препаратов для лечения различных заболеваний:

1. **Сахарный диабет** - инсулин и его аналоги, агонисты GLP-1 (эксенатид, лираглутид)
2. **Онкологические заболевания** - гонадорелин, октреотид, пептидные вакцины
3. **Сердечно-сосудистые заболевания** - натрийуретические пептиды, ангиотензин-превращающие ферменты
4. **Инфекционные заболевания** - антимикробные пептиды
5. **Аутоиммунные заболевания** - иммуномодулирующие пептиды
6. **Нейродегенеративные заболевания** - нейропептиды и их аналоги

## Преимущества пептидных препаратов

Пептидные препараты обладают рядом преимуществ перед другими лекарственными средствами:

- Высокая специфичность действия
- Низкая токсичность
- Минимальное количество побочных эффектов
- Биоразлагаемость
- Возможность точной настройки фармакологических свойств

## Вызовы и перспективы

Несмотря на очевидные преимущества, разработка и применение пептидных препаратов сталкиваются с определенными трудностями, такими как:

- Низкая биодоступность при пероральном приеме
- Короткий период полураспада в организме
- Сложности с проникновением через гематоэнцефалический барьер
- Высокая стоимость производства

Однако современные исследования направлены на преодоление этих ограничений путем разработки новых методов доставки пептидов, создания модифицированных аналогов с улучшенными фармакокинетическими свойствами и оптимизации процессов производства.

## Заключение

Пептиды занимают все более важное место в современной медицине и фармацевтике. Их уникальные свойства и широкий спектр биологической активности делают их перспективными кандидатами для разработки новых лекарственных препаратов для лечения различных заболеваний.',
    'Обзор применения пептидов в современных фармацевтических препаратах и их роль в лечении различных заболеваний.',
    'https://images.pexels.com/photos/3683074/pexels-photo-3683074.jpeg?auto=compress&cs=tinysrgb&w=600',
    true,
    '2025-04-03 15:30:00+00'
  ),
  (
    'Регуляторные аспекты производства пептидов', 
    'regulyatornye-aspekty-proizvodstva-peptidov',
    '# Регуляторные аспекты производства пептидов

Производство пептидов и пептидных препаратов подчиняется строгим регуляторным требованиям, которые обеспечивают их безопасность, эффективность и качество. В данной статье рассматриваются основные регуляторные аспекты, связанные с производством пептидов в России и за рубежом.

## Нормативные требования в России

В Российской Федерации производство пептидных субстанций и препаратов регулируется следующими основными нормативными документами:

1. Федеральный закон "Об обращении лекарственных средств" (№61-ФЗ)
2. Правила надлежащей производственной практики (GMP)
3. Государственная фармакопея Российской Федерации
4. Отраслевые стандарты и руководства Минздрава России

Для производства пептидных субстанций необходимо получить лицензию на производство фармацевтических субстанций, а для производства готовых лекарственных форм - лицензию на производство лекарственных средств.

## Международные стандарты

Международные стандарты, применяемые к производству пептидов, включают:

- Руководства ICH (Международная конференция по гармонизации)
- Рекомендации FDA (США)
- Требования EMA (Европейский союз)
- Руководства ВОЗ

## Контроль качества

Контроль качества пептидных субстанций и препаратов включает в себя:

1. **Идентификация** - подтверждение структуры пептида методами масс-спектрометрии, аминокислотного анализа и другими аналитическими методами
2. **Чистота** - определение содержания примесей, включая родственные соединения, остаточные растворители и др.
3. **Количественное определение** - установление содержания действующего вещества
4. **Биологическая активность** - определение специфической активности пептида
5. **Стабильность** - изучение стабильности пептида в различных условиях хранения

## Валидация процессов

Все процессы производства пептидов должны быть валидированы в соответствии с требованиями GMP. Валидация включает в себя:

- Валидацию аналитических методик
- Валидацию процессов очистки
- Валидацию производственных процессов
- Валидацию компьютеризированных систем

## Регистрация пептидных препаратов

Для регистрации пептидного препарата необходимо подготовить регистрационное досье, включающее:

1. Административные документы
2. Данные о фармацевтической разработке
3. Результаты доклинических исследований
4. Результаты клинических исследований
5. Данные о производстве и контроле качества

## Заключение

Соблюдение регуляторных требований является необходимым условием для производства пептидных субстанций и препаратов. Компании, занимающиеся разработкой и производством пептидов, должны тщательно следить за изменениями в нормативной базе и своевременно адаптировать свои процессы к новым требованиям.',
    'Обзор нормативных требований и регуляторных аспектов при производстве пептидных препаратов.',
    'https://images.pexels.com/photos/3825586/pexels-photo-3825586.jpeg?auto=compress&cs=tinysrgb&w=600',
    true,
    '2025-03-25 09:15:00+00'
  );